## 🚀 AI 기반 TDD 에이전트 파이프라인: 역할 및 작업 흐름 (최종 디벨롭 버전)

**🎯 목표:** 테스트 주도 개발(TDD) 워크플로우의 각 단계를 전문화된 AI 에이전트에게 맡겨 **신규 기능 개발을 자동화**하고, **코드 품질**과 **개발 속도**를 향상시키는 것입니다. 🚀

---

## 💡 핵심 통제 원칙 및 구현 방식

저희 파이프라인은 Node.js SDK를 사용하여 **TDD 워크플로우의 일관성과 재현성을 보장**합니다.

- **통제권 확보 (`agent_prompts.js`):** 모든 에이전트는 `agent_prompts.js`에 정의된 **강력한 규칙** (타입/시그니처 100% 준수, 테스트 파일 수정 금지, Mock 핸들러 활용 등)을 따르도록 **행동이 제약**됩니다.
- **일관된 컨텍스트:** 모든 단계에서 **최종 명세서**(`output-02-feature-spec.md`)를 **유일한 진실의 원천(Source of Truth)**으로 참조하며, Node.js 스크립트가 Git 상태를 정확히 관리하며 **컨텍스트의 연속성**을 보장합니다.

---

## 에이전트별 역할 및 작업 책임 🤖

| 단계                                 | 에이전트 역할                                                                                    | 핵심 책임 (Output)                                            |
| :----------------------------------- | :----------------------------------------------------------------------------------------------- | :------------------------------------------------------------ |
| **1. 기능 설계 (Design)**            | PRD 분석 후 $\rightarrow$ **최종 명세서** 작성. **(Q\&A 및 자가 평가를 통해 명세 견고성 확보)**  | `logs/output-02-feature-spec.md` (데이터 모델, API 흐름 확정) |
| **2. 테스트 설계 (Test-Design)**     | 명세 기반 $\rightarrow$ **빈 테스트 셸** 생성. **(Mock 데이터는 작성 금지)**                     | `src/__tests__` (RED 셸 확립)                                 |
| **3. 테스트 코드 작성 (Test-Write)** | 빈 셸 $\rightarrow$ **실제 테스트 로직** (Mocking, Assertion) 구현. **(RED 완성)**               | `src/__tests__` (실제 테스트 로직)                            |
| **4. 코드 작성 (Code-Write)**        | 실패 테스트 $\rightarrow$ 테스트를 통과하는 **기능 코드** 작성.                                  | `src/types.ts`, `src/utils/`, `src/hooks/` (GREEN 목표)       |
| **4.5. 코드 리뷰 (Code Review)**     | 4단계 후 **타입 안정성, 스타일**을 자동 검토 및 수정하여 **GREEN 달성 안정성** 확보.             | `logs/code-review-log.md` (상세 기록)                         |
| **5. 코드 수정 (Code-Fix)**          | **실패 로그** 기반 $\rightarrow$ **비동기 오류 및 로직 오류 자동 디버깅** (GREEN 달성까지 반복). | `src/` (GREEN 달성)                                           |
| **6. UI 구현 (UI-Implement)**        | 완성 로직 기반 $\rightarrow$ **UI 컴포넌트 통합 및 수정**. (`App.tsx`에서 모달/아이콘 연결)      | `src/components/`, `src/App.tsx` (UI/UX 완성)                 |
| **7. 리팩토링 (Refactor)**           | 테스트 통과 코드를 **개선** (가독성, 효율성). **타입/시그니처 불변성 유지.**                     | `src/` (REFACTOR)                                             |

---

## 작업 흐름 (Step-by-Step) 🚶➡️🏃

1.  **(Step 1: 설계)** $\rightarrow$ **🧑‍💻 개발자 개입**을 통해 명세서 확정.
2.  **(Step 2 ~ 5: TDD Core Loop)**
    - **2 & 3단계** 실행 $\rightarrow$ **RED 🔴** 상태 확립.
    - **4단계** 실행 $\rightarrow$ **GREEN 🟢** 달성 시도.
    - **5단계** 실행 (필요 시) $\rightarrow$ **실패 로그** 기반 자동 디버깅 **(디버거 불필요)**.
    - **✅ 통과 시:** 다음 단계로.
3.  **(Step 6: UI 통합)** $\rightarrow$ `06-run-ui-implementation.js` 실행으로 **UI 완성**.
4.  **(Step 7: 최종 정리)** $\rightarrow$ `07-run-refactor.js` 실행.

---

## 핵심 장점 ✨

- **재현성 및 일관성:** AI에게 **매번 질문할 필요 없이**, 스크립트 실행만으로 **일관된 결과물**을 얻을 수 있습니다.
- **통제된 자율성:** AI를 규칙과 최종 명세서에 종속시켜 **행동의 예측 가능성**을 높입니다.
- **디버깅 효율:** 실패 로그를 AI에게 직접 제공하는 **자동 수정 루프**를 통해 개발자의 디버깅 시간을 90% 이상 단축시킵니다.
- **품질 향상:** 코드 리뷰 및 리팩토링 단계를 통해 코드 품질을 높입니다.
